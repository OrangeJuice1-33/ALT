{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kartikarora/alt/src/lib/supabase/client.ts"],"sourcesContent":["// src/lib/supabase/client.ts\n\"use client\";\n\nimport { createClient } from \"@supabase/supabase-js\";\n\nexport const supabaseBrowser = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAM3B;AAHF;AAFA;;AAIO,MAAM,kBAAkB,IAAA,iNAAY"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///Users/kartikarora/alt/src/components/AuthListener.tsx"],"sourcesContent":["// src/components/AuthListener.tsx\n\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\n\nexport default function AuthListener() {\n  const router = useRouter();\n\n  useEffect(() => {\n    const { data: sub } = supabaseBrowser.auth.onAuthStateChange(\n      async (event, session) => {\n        // When user signs in (including after email verification), set cookie for middleware and route appropriately\n        if (event === \"SIGNED_IN\") {\n          const token = session?.access_token;\n          if (token) {\n            // cookie for middleware detection (short lived)\n            document.cookie = `sb-access-token=${token}; path=/; max-age=3600`;\n          }\n\n          const user = session?.user;\n          if (!user) return;\n\n          // check if profile exists\n          const { data: profile } = await supabaseBrowser\n            .from(\"profiles\")\n            .select(\"id\")\n            .eq(\"id\", user.id)\n            .maybeSingle();\n\n          if (!profile) {\n            router.push(\"/auth/complete-profile\");\n          } else {\n            router.push(\"/dashboard\");\n          }\n        }\n\n        if (event === \"SIGNED_OUT\") {\n          // clear cookie and redirect to auth\n          document.cookie = \"sb-access-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\";\n          router.push(\"/auth\");\n        }\n      }\n    );\n\n    return () => {\n      sub.subscription.unsubscribe();\n    };\n  }, [router]);\n\n  return null;\n}\n"],"names":["c","_c","useEffect","useRouter","supabaseBrowser","AuthListener","$","$i","Symbol","for","router","t0","t1","AuthListener[useEffect()]","data","sub","auth","onAuthStateChange","AuthListener[useEffect() > supabaseBrowser.auth.onAuthStateChange()]","event","session","token","access_token","document","cookie","user","profile","from","select","eq","id","maybeSingle","push","subscription","unsubscribe"],"mappings":"AAAA,kCAAA;;;;;AACa,SAAAA,CAAA,IAAAC,EAAA;AAEb,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,eAAe,QAAQ,uBAAuB;;AAJvD,YAAY;;;;;AAMG;;IAAA,MAAAE,CAAA,OAAAL,uLAAA,EAAA;IAAA,IAAAK,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IACb,MAAAI,MAAA;IAA2B,IAAAC,EAAA;IAAA,IAAAC,EAAA;IAAA,IAAAN,CAAA,CAAA,EAAA,KAAAI,MAAA,EAAA;QAEjBC,EAAA,GAAA,CAAA;YAAA,6BAAAE,CAAA;gBACR,MAAA,EAAAC,IAAA,EAAAC,GAAAA,EAAA,GAAsBX,6JAAe,CAAAY,IAAK,CAAAC,iBAAkB,CAC1D;oBAAA,wEAAA,MAAAC,CAAAC,KAAA,EAAAC,OAAA;wBAEE,IAAID,KAAK,KAAK,WAAW,EAAA;4BACvB,MAAAE,KAAA,GAAcD,OAAO,EAAAE,YAAc;4BACnC,IAAID,KAAK,EAAA;gCAEPE,QAAQ,CAAAC,MAAA,GAAU,CAAA,gBAAA,EAAmBH,KAAK,CAAA,sBAAA,CAA3B;4BAAA;4BAGjB,MAAAI,IAAA,GAAaL,OAAO,EAAAK,IAAM;4BAC1B,IAAI,CAACA,IAAI,EAAA;gCAAA;4BAAA;4BAGT,MAAA,EAAAX,IAAA,EAAAY,OAAAA,EAAA,GAA0B,MAAMtB,6JAAe,CAAAuB,IACxC,CAAC,UAAU,CAAC,CAAAC,MACV,CAAC,IAAI,CAAC,CAAAC,EACV,CAAC,IAAI,EAAEJ,IAAI,CAAAK,EAAG,CAAC,CAAAC,WACN,CAAC,CAAC;4BAEhB,IAAI,CAACL,OAAO,EAAA;gCACVhB,MAAM,CAAAsB,IAAK,CAAC,wBAAwB,CAAC;4BAAA,OAAA;gCAErCtB,MAAM,CAAAsB,IAAK,CAAC,YAAY,CAAC;4BAAA;wBAC1B;wBAGH,IAAIb,KAAK,KAAK,YAAY,EAAA;4BAExBI,QAAQ,CAAAC,MAAA,GAAU,iEAAH;4BACfd,MAAM,CAAAsB,IAAK,CAAC,OAAO,CAAC;wBAAA;oBACrB;gBAAA,CAAA,CAAA,uEAEL,CAAC;gBAAC,OAEK;oBACLjB,GAAG,CAAAkB,YAAa,CAAAC,WAAY,CAAC,CAAC;gBAAA,CAC/B;YAAA;SAAA,CAAA,CAAA,4BACF;QAAEtB,EAAA,GAAA;YAACF,MAAM;SAAC;QAAAJ,CAAA,CAAA,EAAA,GAAAI,MAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAK,EAAA;QAAAL,CAAA,CAAA,EAAA,GAAAM,EAAA;IAAA,OAAA;QAAAD,EAAA,GAAAL,CAAA,CAAA,EAAA;QAAAM,EAAA,GAAAN,CAAA,CAAA,EAAA;IAAA;QAvCXJ,iLAAS,EAACS,EAuCT,EAAEC,EAAQ,CAAC;IAAA,OAEL,IAAI;AAAA;;;QA3CIT,yJAAS,CAAC,CAAC;;;KADbE,aAAA","ignoreList":[]}}]
}