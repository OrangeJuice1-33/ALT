{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kartikarora/alt/src/app/add-venue/gallery/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\n\nexport default function VenueGalleryPage() {\n  const router = useRouter();\n  const params = useSearchParams();\n  const venueId = params.get(\"id\"); // passed from previous step\n\n  const [items, setItems] = useState<\n    { tempUrl: string; file: File | null; caption: string }[]\n  >([]);\n  const [uploading, setUploading] = useState(false);\n\n  async function uploadToStorage(file: File) {\n    const filename = `${venueId}-${Date.now()}.${file.name.split(\".\").pop()}`;\n    const { error } = await supabaseBrowser.storage\n      .from(\"venue-gallery\")\n      .upload(filename, file);\n\n    if (error) throw error;\n\n    const { data } = supabaseBrowser.storage\n      .from(\"venue-gallery\")\n      .getPublicUrl(filename);\n\n    return data.publicUrl;\n  }\n\n  async function addItem(e: React.ChangeEvent<HTMLInputElement>) {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    const temp = URL.createObjectURL(file);\n    setItems([...items, { tempUrl: temp, file, caption: \"\" }]);\n  }\n\n  async function submitGallery() {\n    if (items.length < 5) {\n      alert(\"Upload at least 5 images.\");\n      return;\n    }\n    setUploading(true);\n\n    for (const it of items) {\n      const publicUrl = await uploadToStorage(it.file!);\n\n      const { error } = await supabaseBrowser.from(\"venue_gallery\").insert({\n        venue_id: venueId,\n        url: publicUrl,\n        caption: it.caption,\n      });\n\n      if (error) {\n        alert(\"Upload failed: \" + error.message);\n        setUploading(false);\n        return;\n      }\n    }\n\n    // mark listing step-5 complete\n    await supabaseBrowser\n      .from(\"venue_listings\")\n      .update({ step: 6 }) // progress tracker\n      .eq(\"id\", venueId);\n\n    setUploading(false);\n    router.push(`/add-venue/step-6-booking`);\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-[radial-gradient(circle_at_top_left,#07102a_0%,#03031a_60%)] p-6 text-white\">\n      <div className=\"max-w-3xl w-full bg-[#07102a]/90 p-8 rounded-xl border border-zinc-800 shadow-xl\">\n        <h1 className=\"text-3xl font-bold mb-4\">Venue Gallery</h1>\n        <p className=\"text-zinc-400 mb-4\">\n          Upload minimum 5 pictures. Each picture requires a caption.\n        </p>\n\n        <input type=\"file\" accept=\"image/*\" onChange={addItem} className=\"mb-4\" />\n\n        <div className=\"space-y-4 max-h-64 overflow-y-auto mb-6\">\n          {items.map((it, i) => (\n            <div key={i} className=\"bg-zinc-900 p-3 rounded-md\">\n              <img src={it.tempUrl} className=\"w-full h-44 object-cover rounded-md mb-2\" />\n              <input\n                value={it.caption}\n                onChange={(e) => {\n                  const copy = [...items];\n                  copy[i].caption = e.target.value;\n                  setItems(copy);\n                }}\n                placeholder=\"Caption\"\n                className=\"w-full bg-zinc-800 border border-zinc-700 p-2 rounded-md\"\n              />\n            </div>\n          ))}\n        </div>\n\n        <button\n          className=\"px-6 py-2 bg-green-600 rounded-md font-semibold w-full\"\n          onClick={submitGallery}\n          disabled={uploading}\n        >\n          {uploading ? \"Submitting...\" : \"Next\"}\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,SAAS,IAAA,sJAAS;IACxB,MAAM,SAAS,IAAA,4JAAe;IAC9B,MAAM,UAAU,OAAO,GAAG,CAAC,OAAO,4BAA4B;IAE9D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wNAAQ,EAEhC,EAAE;IACJ,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,wNAAQ,EAAC;IAE3C,eAAe,gBAAgB,IAAU;QACvC,MAAM,WAAW,GAAG,QAAQ,CAAC,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI;QACzE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,0JAAe,CAAC,OAAO,CAC5C,IAAI,CAAC,iBACL,MAAM,CAAC,UAAU;QAEpB,IAAI,OAAO,MAAM;QAEjB,MAAM,EAAE,IAAI,EAAE,GAAG,0JAAe,CAAC,OAAO,CACrC,IAAI,CAAC,iBACL,YAAY,CAAC;QAEhB,OAAO,KAAK,SAAS;IACvB;IAEA,eAAe,QAAQ,CAAsC;QAC3D,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,CAAC,MAAM;QACX,MAAM,OAAO,IAAI,eAAe,CAAC;QACjC,SAAS;eAAI;YAAO;gBAAE,SAAS;gBAAM;gBAAM,SAAS;YAAG;SAAE;IAC3D;IAEA,eAAe;QACb,IAAI,MAAM,MAAM,GAAG,GAAG;YACpB,MAAM;YACN;QACF;QACA,aAAa;QAEb,KAAK,MAAM,MAAM,MAAO;YACtB,MAAM,YAAY,MAAM,gBAAgB,GAAG,IAAI;YAE/C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,0JAAe,CAAC,IAAI,CAAC,iBAAiB,MAAM,CAAC;gBACnE,UAAU;gBACV,KAAK;gBACL,SAAS,GAAG,OAAO;YACrB;YAEA,IAAI,OAAO;gBACT,MAAM,oBAAoB,MAAM,OAAO;gBACvC,aAAa;gBACb;YACF;QACF;QAEA,+BAA+B;QAC/B,MAAM,0JAAe,CAClB,IAAI,CAAC,kBACL,MAAM,CAAC;YAAE,MAAM;QAAE,GAAG,mBAAmB;SACvC,EAAE,CAAC,MAAM;QAEZ,aAAa;QACb,OAAO,IAAI,CAAC,CAAC,yBAAyB,CAAC;IACzC;IAEA,qBACE,qPAAC;QAAI,WAAU;kBACb,cAAA,qPAAC;YAAI,WAAU;;8BACb,qPAAC;oBAAG,WAAU;8BAA0B;;;;;;8BACxC,qPAAC;oBAAE,WAAU;8BAAqB;;;;;;8BAIlC,qPAAC;oBAAM,MAAK;oBAAO,QAAO;oBAAU,UAAU;oBAAS,WAAU;;;;;;8BAEjE,qPAAC;oBAAI,WAAU;8BACZ,MAAM,GAAG,CAAC,CAAC,IAAI,kBACd,qPAAC;4BAAY,WAAU;;8CACrB,qPAAC;oCAAI,KAAK,GAAG,OAAO;oCAAE,WAAU;;;;;;8CAChC,qPAAC;oCACC,OAAO,GAAG,OAAO;oCACjB,UAAU,CAAC;wCACT,MAAM,OAAO;+CAAI;yCAAM;wCACvB,IAAI,CAAC,EAAE,CAAC,OAAO,GAAG,EAAE,MAAM,CAAC,KAAK;wCAChC,SAAS;oCACX;oCACA,aAAY;oCACZ,WAAU;;;;;;;2BAVJ;;;;;;;;;;8BAgBd,qPAAC;oBACC,WAAU;oBACV,SAAS;oBACT,UAAU;8BAET,YAAY,kBAAkB;;;;;;;;;;;;;;;;;AAKzC"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///Users/kartikarora/alt/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,gIACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}