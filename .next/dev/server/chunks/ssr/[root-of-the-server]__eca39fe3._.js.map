{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/kartikarora/alt/src/lib/supabase/client.ts"],"sourcesContent":["// src/lib/supabase/client.ts\n\"use client\";\n\nimport { createClient } from \"@supabase/supabase-js\";\n\nexport const supabaseBrowser = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAG7B;AAFA;;AAIO,MAAM,kBAAkB,IAAA,8MAAY"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///Users/kartikarora/alt/src/components/AuthListener.tsx"],"sourcesContent":["// src/components/AuthListener.tsx\n\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { supabaseBrowser } from \"@/lib/supabase/client\";\n\nexport default function AuthListener() {\n  const router = useRouter();\n\n  useEffect(() => {\n    const { data: sub } = supabaseBrowser.auth.onAuthStateChange(\n      async (event, session) => {\n        // When user signs in (including after email verification), set cookie for middleware and route appropriately\n        if (event === \"SIGNED_IN\") {\n          const token = session?.access_token;\n          if (token) {\n            // cookie for middleware detection (short lived)\n            document.cookie = `sb-access-token=${token}; path=/; max-age=3600`;\n          }\n\n          const user = session?.user;\n          if (!user) return;\n\n          // check if profile exists\n          const { data: profile } = await supabaseBrowser\n            .from(\"profiles\")\n            .select(\"id\")\n            .eq(\"id\", user.id)\n            .maybeSingle();\n\n          if (!profile) {\n            router.push(\"/auth/complete-profile\");\n          } else {\n            router.push(\"/dashboard\");\n          }\n        }\n\n        if (event === \"SIGNED_OUT\") {\n          // clear cookie and redirect to auth\n          document.cookie = \"sb-access-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\";\n          router.push(\"/auth\");\n        }\n      }\n    );\n\n    return () => {\n      sub.subscription.unsubscribe();\n    };\n  }, [router]);\n\n  return null;\n}\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;AAGlC;AACA;AACA;AAJA;;;;AAMe,SAAS;IACtB,MAAM,SAAS,IAAA,sJAAS;IAExB,IAAA,yNAAS,EAAC;QACR,MAAM,EAAE,MAAM,GAAG,EAAE,GAAG,0JAAe,CAAC,IAAI,CAAC,iBAAiB,CAC1D,OAAO,OAAO;YACZ,6GAA6G;YAC7G,IAAI,UAAU,aAAa;gBACzB,MAAM,QAAQ,SAAS;gBACvB,IAAI,OAAO;oBACT,gDAAgD;oBAChD,SAAS,MAAM,GAAG,CAAC,gBAAgB,EAAE,MAAM,sBAAsB,CAAC;gBACpE;gBAEA,MAAM,OAAO,SAAS;gBACtB,IAAI,CAAC,MAAM;gBAEX,0BAA0B;gBAC1B,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,0JAAe,CAC5C,IAAI,CAAC,YACL,MAAM,CAAC,MACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,WAAW;gBAEd,IAAI,CAAC,SAAS;oBACZ,OAAO,IAAI,CAAC;gBACd,OAAO;oBACL,OAAO,IAAI,CAAC;gBACd;YACF;YAEA,IAAI,UAAU,cAAc;gBAC1B,oCAAoC;gBACpC,SAAS,MAAM,GAAG;gBAClB,OAAO,IAAI,CAAC;YACd;QACF;QAGF,OAAO;YACL,IAAI,YAAY,CAAC,WAAW;QAC9B;IACF,GAAG;QAAC;KAAO;IAEX,OAAO;AACT"}}]
}